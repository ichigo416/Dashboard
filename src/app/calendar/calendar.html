<div class="calendar-container">

  <!-- HEADER -->
  <div class="calendar-header">
    <div class="calendar-left">
      <button class="nav-btn" (click)="prev()">‹</button>
      <button class="nav-btn" (click)="next()">›</button>
      <button class="add-event-btn" (click)="openAddEvent()">Add Event +</button>
    </div>

    <h3>{{ monthLabel }}</h3>

    <div class="view-toggle">
      <button [class.active]="viewMode === 'month'" (click)="setView('month')">month</button>
      <button [class.active]="viewMode === 'week'" (click)="setView('week')">week</button>
      <button [class.active]="viewMode === 'day'" (click)="setView('day')">day</button>
    </div>
  </div>

  <!-- ADD EVENT FORM -->
  <div *ngIf="showAddEvent" class="add-event-form">
    <input placeholder="Event title" [(ngModel)]="newEvent.title" />
    <input type="date" [(ngModel)]="newEvent.date" />
    <input type="time" [(ngModel)]="newEvent.time" />
    <button class="save" (click)="saveEvent()">Save</button>
    <button class="cancel" (click)="cancelEvent()">Cancel</button>
  </div>

  <!-- MONTH VIEW -->
  <div *ngIf="viewMode === 'month'" class="month-grid">
    <div class="day-name" *ngFor="let d of ['SUN','MON','TUE','WED','THU','FRI','SAT']">{{ d }}</div>

    <div class="day-cell" *ngFor="let day of daysInMonth">
      <div class="date">{{ day.getDate() }}</div>
      <div class="event" *ngFor="let ev of eventsForDay(day)">
        <span class="time">{{ ev.time }}</span>{{ ev.title }}
      </div>
    </div>
  </div>

  <!-- WEEK VIEW -->
  <div *ngIf="viewMode === 'week'" class="week-grid">
    <div class="week-header">
      <div class="time-col"></div>
      <div class="day-col" *ngFor="let d of getWeekDays()">{{ d | date:'EEE d' }}</div>
    </div>

    <div class="week-row" *ngFor="let h of hours">
      <div class="time-col">{{ h }}:00</div>
      <div class="day-col cell" *ngFor="let d of getWeekDays()">
        <div class="event" *ngFor="let ev of eventsForDayAndHour(d, h)">
          {{ ev.time }} {{ ev.title }}
        </div>
      </div>
    </div>
  </div>

  <!-- DAY VIEW -->
  <div *ngIf="viewMode === 'day'" class="day-grid">
    <div class="day-header">{{ currentDate | date:'fullDate' }}</div>

    <div class="day-row" *ngFor="let h of hours">
      <div class="time-col">{{ h }}:00</div>
      <div class="cell">
        <div class="event" *ngFor="let ev of eventsForDayAndHour(currentDate, h)">
          {{ ev.time }} {{ ev.title }}
        </div>
      </div>
    </div>
  </div>

</div>